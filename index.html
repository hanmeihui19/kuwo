<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div class = 'body'>
        <div class = 'header'>
            <div class = 'container1'>
                <div class = 'item1'><a href = '#'><img class = 'logo' src = 'images/logo.jpg' /></a></div>
                <div class = 'item1'><a href = '#'>首页</a></div>
                <div class = 'item1'><a href = '#'>榜单</a></div>
                <div class = 'item1'><a href = '#'>歌手</a></div>
                <div class = 'item1'><a href = '#'>下载酷我客户端</a></div>
            </div>
            <div class = 'container2'>
                <div class = 'item2'><div id = 'star'></div><a href = '#'>美女秀</a></div>
                <div class = 'item2'><div id = 'star'></div><a href = '#'>酷我耳机</a></div>
                <div class = 'item2'><div id = 'star'></div><a href = '#'>VIP会员</a></div>
                <div class = 'item2'><div id = 'star'></div><a href = '#'>i听</a></div>
            </div>
            <div class = 'container3'>
                <div class = 'item3'><a href = '#'>更多服务</a></div>
                <div class = 'item3'><a href = '#'>登录</a></div>
                <div class = 'item3'><a herf = '#'>^</a></div>
            </div>
            <div class = 'container4'>
                <div class = 'item4' id = 'search'><input type = 'search' placeholder="找到好音乐" /></div>
            </div>
        </div>
        <div class = 'section-song'>
            <div class = 'song'>
                <div class = 'song-left'>
                    <h1>喜羊羊</h1>
                    <div class = 'introduce'><span class = 'grey'>专辑：</span><span class = 'orange'>儿童大全&nbsp;&nbsp;</span><span class = 'grey'>歌手：</span>
                        <span class = 'orange'>华语群星&nbsp;&nbsp;</span><a href = '#' class = 'share'>分享</a>&nbsp;&nbsp;
                        <a href = '#'><img src = 'images/comment.jpg' />&nbsp;&nbsp;<span class = 'orange'>评论</span></a></div>
                    <div class = 'time'>
                        上传时间：2015-10-02 歌曲来源：民大相思潮网球社
                    </div>
                    <hr />
                    <div class = 'word'>
                        <p><span class = 'light'>喜羊羊美羊羊懒羊羊沸羊羊</span></p><br/>
                        <p>慢羊羊软绵绵红太狼灰太狼</p><br/>
                        <p>别看我只是一只羊</p><br/>
                        <p>绿草因为我变的更香</p><br/>
                        <p><span class = 'light'>天空因为我变的更蓝</span></p><br/>
                        <p>白云因为我变的柔软</p><br/>
                        <p>别看我只是一只羊</p><br/>
                        <p>羊儿的聪明难以想像</p><br/>
                        <p><span class = 'light'>天再高心情一样奔放</span></p><br/>
                        <p>每天都追赶太阳</p><br/>
                        <p>有什么难题去牵绊我都不会去心伤</p><br/>
                        <p>有什么危险在我面前也不会去慌乱</p><br/>
                        <p><span class = 'light'>就算有狼群把我追捕也当做游戏一场</span></p><br/>
                        <p>在什么时间都爱开心笑容都会飞翔</p><br/>
                        <p>就算会摔倒站得起来永远不会沮丧</p><br/>
                        <p>在所有天气拥有叫人大笑的力量</p><br/>
                        <p><span class = 'light'>虽然我只是羊</span></p><br/>
                    </div>
                </div>
                <div class = 'song-right'>
                    <div class = 'yang'>
                        <img src = 'images/yang.jpg' />
                        <div class = 'big'></div>
                        <div class = 'small'></div>
                    </div>
                    <div class = 'player'>
                        <audio id = 'mymusic'><source src="images/music.mp3" type="audio/mp3"></audio>
                        <div id="playBtn"></div>
                        <div id = 'prograssBar'>
                            <div id = 'currentProgress'></div>
                            <a href = '#' id = 'processBtn'></a>
                        </div>
                        <div id = 'time'>00:00</div>
                        <div id = 'mute'></div>
                    </div>
                    <div class = 'download'>
                        <div class = 'arrow'></div>
                        <a href = '#'>免费下载这首歌</a>
                    </div>
                    <div class = 'discuss'>
                        <div class = 'gzy'><a href = "#"><img src = 'images/郭子仪.jpg' /></a></div>
                        <div class = 'talk'>
                            <img src = 'images/showAdBg.jpg' />
                            <div class ='class'><a href = '#'>郭子仪——H5班</a></div>
                            <div class = 'blue'><img src = 'images/gif.gif' style = 'width: 18px; height: 18px'/>喜羊羊与灰太狼</div>
                            <div class = 'go'><a href = '#'>去现场 ></a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class = 'leave-word'>
            <p class = 'all'><a href = '#'>评论</a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span id = 'add-one'>3</span><span>条评论</span></p>
            <hr />
            <div class = 'say'>
                <div class = 'gzy_'><a href = "#"><img src = 'images/郭子仪.jpg'/></a></div> 
                <div class = 'input'>
                    <textarea rows = '10' cols = '120' placeholder = '分享你的音乐见解' id = 'textarea'></textarea>
                    <div class = 'emoji-count'>
                        <div class = 'emoji'><a href = '#'><img src = 'images/commenticon.png' /></a></div>
                        <div id = 'count'>已输入&nbsp;0个字</div>
                        <button id = 'btn'>评论</button>
                    </div>
                </div>
            </div>
            <div class = 'look'>
                <p class = 'good'><a href = '#'>精彩评论</a></p>
                <hr />
                <div class = 'board'>
                    <div id = 'content'>
                        <div id = 'hidden'>
                            <ul id = 'lists'>
                                <li class = 'first'>
                                    <div class = 'picture'><img src = 'images/郭子仪.jpg' /></div>
                                    <div id = 'main'>
                                        <div><a href = '#'>郭子仪</a></div>
                                        <div id = 'word'>喜羊羊与灰太狼</div>
                                        <div id = 'date'>2021-06-06 13:52:44</div>
                                    </div>
                                    <div class = 'aside'>
                                        <div class = 'share'><a href = '#'>分享</a></div>
                                        <div><a href = '#'>删除</a>&nbsp;&nbsp;163&nbsp;<img src = 'images/bg2.jpg' />&nbsp;&nbsp;<a href = '#'>回复</a></div>
                                    </div>
                                </li>
                                <li class = 'second'>
                                    <div class = 'picture'><img src = 'images/ktv.jpg' /></div>
                                    <div id = 'main'>
                                        <a href = '#'>亚里士多德</a>
                                        <div id = 'word'>2021年6月6日打卡!</div>
                                        <div id = 'date'>2021-06-06 14:27:12</div>
                                    </div>
                                    <div class = 'aside'>
                                        <div class = 'share'><a href = '#'>分享</a></div>
                                        <div><a href = '#'>删除</a>&nbsp;&nbsp;149&nbsp;<img src = 'images/bg2.jpg' />&nbsp;&nbsp;<a href = '#'>回复</a></div>
                                    </div>
                                </li>
                                <li class = 'third'>
                                    <div class = 'picture'><img src = 'images/ktv.jpg' /></div>
                                    <div id = 'main'>
                                        <a href = '#'>用户194319</a>
                                        <div id = 'word'>yyds!<img src = 'images/emoji_12.png' /></div>
                                        <div id = 'date'>2021-06-06 14:28:14</div>
                                    </div>
                                    <div class = 'aside'>
                                        <div class = 'share'><a href = '#'>分享</a></div>
                                        <div><a href = '#'>删除</a>&nbsp;&nbsp;106&nbsp;<img src = 'images/bg2.jpg' />&nbsp;&nbsp;<a href = '#'>回复</a></div>
                                    </div>
                                </li>
                            </ul>
                        </div>
                        <div class = 'page'>
                            <div id = 'prev'><img src = 'images/prev.png' /></div>
                            <div id = 'firstpage'>1</div>
                            <div class = 'point'>. . .</div>
                            <div id = 'lastpage'>1</div>
                            <div id = 'next'><img src = 'images/next.png'></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script>
    var playBtn = document.getElementById('playBtn');
    var mymusic = document.getElementById('mymusic');
    var mute = document.getElementById('mute');
    var prograssBar = document.getElementById('prograssBar');
    var currentProgress = document.getElementById('currentProgress');
    var processBtn = document.getElementById('processBtn');
    var time = document.getElementById('time');
    var text = document.getElementById('textarea');
    var count = document.getElementById('count');
    var btn = document.getElementById('btn');
    var addONE = document.getElementById('add-one'); 
    var word =  document.getElementById('word'); 
    var date =  document.getElementById('date'); 
    var lists = document.getElementById('lists');
    var shake = document.getElementById('shake');
    var zan = document.getElementById('zan');
    var lastpage = document.getElementById('lastpage');
    var firstpage = document.getElementById('firstpage');
    var prev = document.getElementById('prev');
    var next = document.getElementById('next');
    var content = document.getElementById('content');
    var hidden = document.getElementById('hidden');
    var intervalId1, intervalId2;

    function changeProgress(){
        var currentTime = mymusic.currentTime;
        var duration = mymusic.duration;

        var minute = currentTime / 60;
        var second = currentTime % 60;
        minute = minute >= 10 ? parseInt(minute) : ("0" + parseInt(minute));
        second = second >= 10 ? parseInt(second) : ("0" + parseInt(second));
        time.innerHTML = minute + ':' + second;

        var barWidth = prograssBar.offsetWidth;
        var rate = currentTime / duration;
        currentProgress.style.width = barWidth * rate + 'px';
        processBtn.style.left = barWidth * rate + 'px';

        if (currentTime == duration) {
            playBtn.style.backgroundPosition = '-110px -88px';
            currentProgress.style.width = 0;
            processBtn.style.left = 0;
            time.innerHTML = '00:00';
        }
    }

    playBtn.onclick = function(){
        if (mymusic.paused){
            mymusic.play();
            this.style.backgroundPosition = '-207px -88px';
            intervalId1 = setInterval(changeProgress, 1000);
        } else {
            mymusic.pause();
            this.style.backgroundPosition = '-110px -88px';
            clearInterval(intervalId1);
        }
    }

    mute.onclick = function(){
        if (mymusic.muted) {
            this.style.backgroundPosition = '-68px 0px';
        } else {
            this.style.backgroundPosition = '-40px 0px';
        }
        mymusic.muted = !mymusic.muted;
    }

    function getCount(text ,count){
        text.onkeyup = function(){
            count.innerHTML = '已输入&nbsp' + text.value.length + '个字';
        }
    }

    text.onfocus = function(){
        intervalId2 = setInterval(getCount(text ,count), 5000)
    }

    text.onblur = function(){
        clearInterval(intervalId2);
    }

    window.onload = function(){
		var List = localStorage["comment"];
        if (List == "" || List == null || List == undefined) {
			addONE.innerHTML = 3;
		} else {
            list = JSON.parse(List);
            addONE.innerHTML = 3 + list.length;
        }
        getList();
    }

    btn.onclick = function(){
        if (window.localStorage){
            if (text.value != ''){
                var date = new Date();

                var year = date.getFullYear();
                var month = date.getMonth() + 1;
                month = month >= 10 ? month : '0' + month;
                var day = date.getDate();
                day = day >= 10 ? day : '0' + day;
                var hour = date.getHours();
                hour = hour >= 10 ? hour : '0' + hour;
                var minute = date.getMinutes();
                minute = minute >= 10 ? minute : '0' + minute;
                var second = date.getSeconds();
                second = second >= 10 ? second : '0' + second;

                timer = year + '-' + month + '-' + day + ' ' + hour + ':' + minute + ':' + second;

                value = text.value;
                saveList(value, timer); 
            } else {
                alert("请输入内容！");
            }
        } else {
            alert('当前浏览器不支持本地存储！');
        }
    }

    function saveList(value, timer){
		var List = localStorage["comment"];
		if(List == "" || List == null || List == undefined) {
			localStorage["comment"] = "[]";
		}
		List = JSON.parse(localStorage["comment"]);
		var Obj = {value: value, timer: timer};
		List.push(Obj);
        addONE.innerHTML = 3 + List.length;
		localStorage["comment"] = JSON.stringify(List);

        text.value = '';
        count.innerHTML = '已输入&nbsp;0个字';
    }

    function getList() {
		var List = localStorage["comment"];
		List = JSON.parse(List);
		for(var i = 0; i < List.length; i++) {
			var liNode = document.createElement("li");
                                            
            liNode.innerHTML = 
                "<div class = 'picture'><img src = 'images/ktv.jpg' /></div>" + 
                "<div id = 'main'>" + 
                    "<div><a href = '#'>酷我用户</a></div>" + 
                    "<div id = 'word'>" + List[i]["value"] + "</div>" +
                    "<div id = 'date'>" + List[i]["timer"] + "</div>" +
                "</div>" +
                "<div class = 'aside'>" +
                    "<div class = 'share'><a href = '#'>分享</a></div>" +
                    "<div><a href = '#'>删除</a>&nbsp;&nbsp;100&nbsp;<img src = 'images/bg2.jpg' />&nbsp;&nbsp;<a href = '#'>回复</a></div>" +
                "</div>"
            ;

			lists.appendChild(liNode);

            lastpage.innerHTML = Math.ceil(list.length / 3) + 1;
		}
	}

    var value = 0;
    prev.onclick = function(){
        if (firstpage.innerHTML > 1) {
            firstpage.innerHTML = Number(firstpage.innerHTML) - 1;
            lists.style.top = value + 381 + 'px';
            value += 381;
        }
    }

    next.onclick = function(){
        if (firstpage.innerHTML < lastpage.innerHTML){
            firstpage.innerHTML = Number(firstpage.innerHTML) + 1;
            lists.style.top = value - 381 + "px";
            value -= 381;
        }
    }
</script>
</html>